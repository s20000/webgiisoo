<script type="text/javascript" src="/js/jquery.dictpicker.min.js"></script>

<span><label><h3>$lang.get('log.starttime'):</h3><input type='text' data-beatpicker="true" name='starttime' value=#if($starttime) '$starttime' #else '' #end/></label></span>
<span><label><h3>$lang.get('log.endtime'):</h3><input type='text' data-beatpicker="true" name='endtime' value=#if($endtime) '$endtime' #else '' #end/></label></span>
<span><label><h3>$lang.get('log.user'):</h3><input type='text' name='uid' dict-picker='true' value=#if($uid) '$uid' #else '' #end/></label></span>
<span><label><h3>$lang.get('log.ip'):</h3><input type='text' name='ip' value=#if($ip) '$ip' #else '' #end/></label></span>
<span><label><h3>$lang.get('log.type'):</h3>
	<select name='type'>
		<option value=''>$lang.get('log.type_all')</option>
		<option value='0' #if($type == 0) selected #end>$lang.get('log.type_0')</option>
		<option value='1' #if($type == 1) selected #end>$lang.get('log.type_1')</option>
		<option value='2' #if($type == 2) selected #end>$lang.get('log.type_2')</option>
	</select>
</label></span>
<span><label><h3>$lang.get('log.op'):</h3><input type='text' name='op' dict-picker='true' value=#if($op) '$op' #else '' #end/></label></span>

<script>
$(function(){
	$('#panel .search input[dict-picker=true]').dictpicker(function(node, cb){
		if(node.attr('name') == 'uid') {
			//get user info
			$.post('/user/popup2', {}, function(d){
				if(d.state == 200) {
					cb&&cb(d.list);
				}
			})
		} else if(node.attr('name') == 'op'){
			//get log op
			var p = {};
			p.type = 'op';
			#if($cate)
				p.cate = "$cate";
			#end
			$.post('/admin/log/popup2', p, function(d){
				if(d.state == 200) {
					cb&&cb(d.list);
				}
			})
		}
	});
})
</script>